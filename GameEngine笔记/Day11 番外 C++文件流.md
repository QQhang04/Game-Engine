`std::ifstream` æ˜¯ C++ æ ‡å‡†åº“ä¸­çš„**è¾“å…¥æ–‡ä»¶æµç±»**ï¼Œç”¨äºä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹å®ƒçš„ç”¨æ³•ã€‚

## ä»€ä¹ˆæ˜¯ `std::ifstream`

`ifstream` æ˜¯ "Input File Stream" çš„ç¼©å†™ï¼Œç»§æ‰¿è‡ª `std::istream`ï¼Œä¸“é—¨ç”¨äºæ–‡ä»¶è¾“å…¥æ“ä½œã€‚

```cpp
#include <fstream>  // éœ€è¦åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶
```

## åŸºæœ¬ç”¨æ³•

### 1. æ‰“å¼€å’Œå…³é—­æ–‡ä»¶



## å¸¸ç”¨æ–¹æ³•å’Œå±æ€§

### 1. **æ–‡ä»¶æ‰“å¼€æ¨¡å¼**
```cpp
std::ifstream file("example.txt", std::ios::in);        // æ–‡æœ¬æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
std::ifstream file("example.dat", std::ios::binary);    // äºŒè¿›åˆ¶æ¨¡å¼
std::ifstream file("example.txt", std::ios::in | std::ios::ate); // æ‰“å¼€å¹¶å®šä½åˆ°æœ«å°¾
```

### 2. **å¸¸ç”¨æ–¹æ³•**

| æ–¹æ³•        | è¯´æ˜             | ç¤ºä¾‹                           |
| ----------- | ---------------- | ------------------------------ |
| `open()`    | æ‰“å¼€æ–‡ä»¶         | `file.open("example.txt")`     |
| `close()`   | å…³é—­æ–‡ä»¶         | `file.close()`                 |
| `is_open()` | æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ‰“å¼€ | `if (file.is_open())`          |
| `getline()` | è¯»å–ä¸€è¡Œ         | `std::getline(file, line)`     |
| `read()`    | è¯»å–äºŒè¿›åˆ¶æ•°æ®   | `file.read(buffer, size)`      |
| `seekg()`   | è®¾ç½®è¯»å–ä½ç½®     | `file.seekg(0, std::ios::beg)` |
| `tellg()`   | è·å–å½“å‰ä½ç½®     | `file.tellg()`                 |

### 3. **çŠ¶æ€æ£€æŸ¥æ–¹æ³•**

| æ–¹æ³•     | è¯´æ˜         |
| -------- | ------------ |
| `good()` | æµçŠ¶æ€è‰¯å¥½   |
| `eof()`  | åˆ°è¾¾æ–‡ä»¶æœ«å°¾ |
| `fail()` | æ“ä½œå¤±è´¥     |
| `bad()`  | æµæŸå       |

## å®é™…åº”ç”¨åœºæ™¯

### 1. **è¯»å–é…ç½®æ–‡ä»¶**
```cpp
std::ifstream config("config.txt");
std::string key, value;
while (config >> key >> value) {
    // å¤„ç†é…ç½®é¡¹
}
```

### 2. **è¯»å–æ¸¸æˆæ•°æ®**
```cpp
std::ifstream saveFile("save.dat", std::ios::binary);
int playerLevel, playerScore;
saveFile.read(reinterpret_cast<char*>(&playerLevel), sizeof(playerLevel));
saveFile.read(reinterpret_cast<char*>(&playerScore), sizeof(playerScore));
```

### 3. **è¯»å–æ–‡æœ¬æ–‡ä»¶**
```cpp
std::ifstream textFile("story.txt");
std::string line;
while (std::getline(textFile, line)) {
    // å¤„ç†æ¯ä¸€è¡Œæ–‡æœ¬
}
```

## æ³¨æ„äº‹é¡¹

### 1. **é”™è¯¯å¤„ç†**
```cpp
std::ifstream file("example.txt");
if (!file.is_open()) {
    std::cerr << "æ–‡ä»¶æ‰“å¼€å¤±è´¥" << std::endl;
    return;
}
```

### 2. **èµ„æºç®¡ç†**
```cpp
{
    std::ifstream file("example.txt");
    if (file.is_open()) {
        // ä½¿ç”¨æ–‡ä»¶
    }
    // æ–‡ä»¶ä¼šåœ¨ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨å…³é—­
}
```

### 3. **æ€§èƒ½è€ƒè™‘**
```cpp
// é¢„åˆ†é…å­—ç¬¦ä¸²å¤§å°ï¼ˆå¦‚æœçŸ¥é“æ–‡ä»¶å¤§å°ï¼‰
file.seekg(0, std::ios::end);
std::streampos fileSize = file.tellg();
file.seekg(0, std::ios::beg);
std::string content;
content.reserve(fileSize);
```

## ä¸å…¶ä»–æ–‡ä»¶æµçš„å…³ç³»

```cpp
#include <fstream>

std::ifstream inputFile;    // è¾“å…¥æ–‡ä»¶æµï¼ˆè¯»å–ï¼‰
std::ofstream outputFile;   // è¾“å‡ºæ–‡ä»¶æµï¼ˆå†™å…¥ï¼‰
std::fstream file;          // åŒå‘æ–‡ä»¶æµï¼ˆè¯»å†™ï¼‰
```

`ifstream` æ˜¯æ–‡ä»¶ I/O çš„åŸºç¡€ï¼Œåœ¨æ¸¸æˆå¼€å‘ä¸­ç»å¸¸ç”¨äºï¼š
- è¯»å–é…ç½®æ–‡ä»¶
- åŠ è½½æ¸¸æˆèµ„æº
- è¯»å–å­˜æ¡£æ–‡ä»¶
- è§£ææ•°æ®æ–‡ä»¶



è®©æˆ‘è¯¦ç»†å›ç­”è¿™ä¸‰ä¸ªé—®é¢˜ï¼š

## 1. `sstream` å’Œ `fstream` å¤´æ–‡ä»¶çš„ä½œç”¨

### `sstream` - å­—ç¬¦ä¸²æµ
```cpp
#include <sstream>  // å­—ç¬¦ä¸²æµæ“ä½œ
```

**ä½œç”¨**ï¼šæä¾›å­—ç¬¦ä¸²å’Œæµä¹‹é—´çš„è½¬æ¢ï¼Œç”¨äºå­—ç¬¦ä¸²è§£æå’Œæ ¼å¼åŒ–ã€‚

**ä¸»è¦ç±»**ï¼š
- `std::stringstream` - åŒå‘å­—ç¬¦ä¸²æµï¼ˆè¯»å†™ï¼‰
- `std::istringstream` - è¾“å…¥å­—ç¬¦ä¸²æµï¼ˆåªè¯»ï¼‰
- `std::ostringstream` - è¾“å‡ºå­—ç¬¦ä¸²æµï¼ˆåªå†™ï¼‰

### `fstream` - æ–‡ä»¶æµ
```cpp
#include <fstream>  // æ–‡ä»¶æµæ“ä½œ
```

**ä½œç”¨**ï¼šæä¾›æ–‡ä»¶å’Œæµä¹‹é—´çš„æ“ä½œï¼Œç”¨äºæ–‡ä»¶è¯»å†™ã€‚

**ä¸»è¦ç±»**ï¼š
- `std::fstream` - åŒå‘æ–‡ä»¶æµï¼ˆè¯»å†™ï¼‰
- `std::ifstream` - è¾“å…¥æ–‡ä»¶æµï¼ˆåªè¯»ï¼‰
- `std::ofstream` - è¾“å‡ºæ–‡ä»¶æµï¼ˆåªå†™ï¼‰



## 2. `seekg` å’Œ `streampos` è¯¦è§£

åœ¨ C++ ä¸­ï¼Œ`seekg` å’Œ `streampos` æ˜¯å’Œ**æ–‡ä»¶æµä½ç½®æ“ä½œ**å¯†åˆ‡ç›¸å…³çš„ï¼Œå¸¸ç”¨äº**éšæœºè¯»å–æ–‡ä»¶å†…å®¹**ã€‚ä¸‹é¢æ˜¯å®ƒä»¬çš„è¯¦ç»†è§£é‡Šå’Œç”¨æ³•ã€‚

---

### âœ… `seekg` æ˜¯ä»€ä¹ˆï¼Ÿ

`seekg` æ˜¯ `istream`ï¼ˆå¦‚ `ifstream`ï¼‰ä¸­çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œç”¨æ¥**è®¾ç½®è¾“å…¥æµçš„è¯»æŒ‡é’ˆï¼ˆget pointerï¼‰çš„ä½ç½®**ã€‚

#### å¸¸ç”¨å½¢å¼ï¼š

```cpp
istream& seekg (streampos pos);
istream& seekg (streamoff off, ios_base::seekdir dir);
```

* `pos`ï¼šç»å¯¹ä½ç½®ï¼ˆé€šå¸¸æ˜¯ `streampos` ç±»å‹ï¼‰
* `off`ï¼šåç§»é‡ï¼ˆé€šå¸¸æ˜¯æ•´æ•°ï¼‰
* `dir`ï¼š

  * `ios::beg`ï¼šä»æ–‡ä»¶å¼€å¤´è®¡ç®—åç§»
  * `ios::cur`ï¼šä»å½“å‰ä½ç½®è®¡ç®—åç§»
  * `ios::end`ï¼šä»æ–‡ä»¶æœ«å°¾è®¡ç®—åç§»

#### ç¤ºä¾‹ï¼š

```cpp
ifstream file("example.txt", ios::binary);
file.seekg(10, ios::beg); // æŠŠè¯»æŒ‡é’ˆç§»åŠ¨åˆ°æ–‡ä»¶å¼€å¤´åçš„ç¬¬10ä¸ªå­—èŠ‚
```

---

### âœ… `streampos` æ˜¯ä»€ä¹ˆï¼Ÿ

`streampos` æ˜¯ä¸€ä¸ªç±»ç±»å‹ï¼Œè¡¨ç¤º**æ–‡ä»¶ä¸­æŸä¸ªä½ç½®çš„æŠ½è±¡è¡¨ç¤º**ã€‚å®ƒé€šå¸¸ç”¨æ¥å­˜å‚¨ä¸€ä¸ªâ€œæŒ‡é’ˆä½ç½®â€ï¼Œä¾¿äºåç»­æ¢å¤ã€‚

#### ç¤ºä¾‹ï¼š

```cpp
ifstream file("example.txt", ios::binary);
streampos pos = file.tellg(); // è®°å½•å½“å‰ä½ç½®
file.seekg(100, ios::beg);    // è·³åˆ°ç¬¬100ä¸ªå­—èŠ‚
file.seekg(pos);              // å›åˆ°åŸæ¥çš„ä½ç½®
```

---

### ğŸ§  å®ƒä»¬çš„ä½œç”¨ä¸ä½¿ç”¨åœºæ™¯

| åŠŸèƒ½               | ä½¿ç”¨åœºæ™¯                                       |
| ------------------ | ---------------------------------------------- |
| éšæœºè®¿é—®æ–‡ä»¶       | ä»å¤§æ–‡ä»¶ä¸­è¯»å–ç‰¹å®šä½ç½®çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä»å¤´è¯»åˆ°å°¾ |
| è®°å½•å¹¶æ¢å¤è¯»å–ä½ç½® | æ¯”å¦‚åœ¨è§£æå¤æ‚æ ¼å¼çš„äºŒè¿›åˆ¶æ–‡ä»¶æ—¶               |
| è·³è¿‡æ— å…³æ•°æ®       | æ¯”å¦‚è·³è¿‡æ–‡ä»¶å¤´ã€è·³è¿‡æŸäº›å­—æ®µ                   |
| å®ç°å›é€€åŠŸèƒ½       | æ¯”å¦‚å¤±è´¥åé€€å›æŸä¸ªæ£€æŸ¥ç‚¹å†è¯»                   |

---

### ğŸ“Œ ç¤ºä¾‹åœºæ™¯ï¼šè¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„ç‰¹å®šéƒ¨åˆ†

```cpp
#include <iostream>
#include <fstream>

using namespace std;

int main() {
    ifstream file("data.bin", ios::binary);

    if (file) {
        file.seekg(20, ios::beg); // è·³è¿‡å‰20ä¸ªå­—èŠ‚

        char buffer[10];
        file.read(buffer, 10); // è¯»å–10ä¸ªå­—èŠ‚

        cout << "Read data: ";
        for (int i = 0; i < 10; ++i)
            cout << hex << (unsigned int)(unsigned char)buffer[i] << " ";
        cout << endl;
    }

    return 0;
}
```

---

### âœ… æ€»ç»“

| åç§°        | ä½œç”¨            | å¸¸ç”¨åœºæ™¯               |
| ----------- | --------------- | ---------------------- |
| `seekg`     | æ”¹å˜è¯»å–ä½ç½®    | éšæœºè¯»å–ã€è·³è¿‡æ•°æ®     |
| `streampos` | è¡¨ç¤º/ä¿å­˜æµä½ç½® | æ¢å¤è¯»å–ä½ç½®ã€å›é€€æ“ä½œ |



